import React from 'react'
import useFetch from 'hooks/useFetch'
import classnames from 'classnames'
const AddToFavourites = ({isFavorited, favoritesCount, articleSlug}) => {
	
	const apiUrl = `articles/${articleSlug}/favorite`
	const [{response}, doFetch] = useFetch(apiUrl)
	const favoritesCountResponse = response ? response.article.favoritesCount : favoritesCount
	const isfavoritedResponse = response ? response.article.favorited : isFavorited
	
	const handleLike = event => {
		event.preventDefault();
		doFetch({
			method: isfavoritedResponse ? 'delete' : 'post'
		})
	}
	const buttonClasses = classnames({
		'btn': true,
		'btn-sm': true,
		'btn-primary': isfavoritedResponse,
		'btn-outline-primary': !isfavoritedResponse
	})
	return (
			<button className={buttonClasses} onClick={handleLike}>
				<i className="ion-heart"></i>
				<span>&nbsp; {favoritesCountResponse}</span>
			</button>
		)
}
export default AddToFavourites